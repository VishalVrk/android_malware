const AdmZip = require('adm-zip');

function analyzeAPK(apkPath) {
  try {
    const zip = new AdmZip(apkPath);
    const zipEntries = zip.getEntries();

    console.log(`Analyzing APK: ${apkPath}`);
    console.log(`Total entries: ${zipEntries.length}`);
    console.log('\nFile list:');

    zipEntries.forEach((entry, index) => {
      const entryName = entry.entryName;
      const entrySize = entry.header.size;
      const isDirectory = entry.isDirectory;

      console.log(`${index + 1}. ${entryName} ${isDirectory ? '(Directory)' : `(Size: ${entrySize} bytes)`}`);
    });

    console.log('\nAnalysis complete.');
  } catch (error) {
    console.error('Error analyzing APK:', error.message);
  }
}

// Usage example
const apkPath = 'bitbar-sample-app.apk';
analyzeAPK(apkPath);